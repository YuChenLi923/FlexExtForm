<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="content-type" content="text/html;charset=UTF-8;">
		<title>表单验证与提交</title>
	</head>
	<body>
	<form id='Form' onsubmit="return false" >
		<input id='companyName' type="text" name="companyName" value="123"></input>
	</form>
	<button id='Form_sumbit' switch='on'>提交数据</button>
	<script type="text/javascript" src="js/ajaxExpand.min.js"></script>
	<script type="text/javascript" src="js/FlexExtForm.min.js"></script>
	<script type="text/javascript">
		createForm(
			[	
			
				{
					id:'companyName',
					type:'公司名',
					pattern:' ',
					ajax:true
				}
			],
			callback,
			['click','keydown','touch','change'],
			'Form','Form_sumbit',
			'php/Form.php',
			'php/Form_Ajax.php',
			isSumbit
		);
		function isSumbit(){// 加入switch的目的是为了让异步提交的过程使得提交按钮失效！！！
			if(this.sumbit.getAttribute('switch')=='on'){
				return true;
			}
		}
		function callback(flag,name){
			var sumbit=document.getElementById('Form_sumbit');
			if(flag == 8 || 9){
				sumbit.innerHTML='提交';
				sumbit.setAttribute('switch','on');
			}
			if (flag == 7) {
				sumbit.innerHTML='正在提交数据';
				sumbit.setAttribute('switch','off')
			}
			console.log(flag,name);
		}
</script>
</body>
</html>
