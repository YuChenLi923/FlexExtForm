var ajaxExpanding={accepts:{xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"},contentTypes:{json:"application/json",file:"multipart/form-data",text:"text/plain",form:"application/x-www-form-urlencoded",_default:"text/plain"},init:function(b){var a=this[b.name]={};a.result=null;a.charset=b.charset;a.type=b.type||"get";a.charset=b.charset;a.async=b.async||false;a.dataType=b.contentType;a.timeOut=b.timeOut;a.xhr=null;a.accept=this.accepts[b.accept]||this.accepts._default;a.data=b.data?encodeData(b.data,a.dataType,b.name,a):null;if(!window.FormData&&a.dataType=="file"){a.fileUp=true;a.fileForm=b.data}else{a.fileUp=false;a.xhr=(function(){if(typeof XMLHttpRequest=="undefined"){XMLHttpRequest=function(){try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(c){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(c){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(c){}return false}}return new XMLHttpRequest()})()}if(!this.charset){a.contentType=this.contentTypes[b.contentType]||"text/plain;charset=utf-8"}else{a.contentType=this.contentTypes[b.contentType]+";charset="+this.charset||"text/plain;charset=utf-8"}},send:function(h,b,g){var c=this[b],f=c.xhr,a=c.fileForm;data=h.data?encodeData(h.data,c.dataType,b,c):c.data;if(!c.fileUp){c.stopFlag=false;c.timeoutFlag=false;if(!g){g=c}if(h.onProgress){try{f.onprogress=function(i){if(i.total>0){h.onProgress.call(g,i.loaded,i.total)}}}catch(d){}}if(h.onAbort){try{f.onabort=function(i){if(c.stopFlag){h.onAbort.call(g,f.status)}}}catch(d){}}if(h.onError){try{f.onerror=function(i){h.onError.call(g)}}catch(d){}}f.onreadystatechange=function(i){if(f.readyState===4){if((f.status>=200&&f.status<300)||f.status==304){c.result=f.responseText;if(h.onSuccess){h.onSuccess.call(g,f.responseText)}}else{if(!c.stopFlag&&!c.timeoutFlag){h.onFail.call(g,f.status)}}}if(f.readyState===0){var j=setTimeout(function(){c.timeoutFlag=true;if((c.async)&&c.timeoutFlag){f.abort();if(h.onTimeOut){h.onTimeOut.call(g)}}},c.timeOut)}};if(c.type=="post"){f.open(c.type,h.url,c.async)}else{if(c.type=="get"){if(h.data){f.open(c.type,h.url+"?"+data,c.async)}else{f.open(c.type,h.url,c.async)}}}if(this.dataType=="form"&&window.FormData){}else{f.setRequestHeader("Content-Type",c.contentType)}f.setRequestHeader("Accept",c.accept);if(this.type=="get"){f.send(null)}else{if(this.dataType=="form"&&!window.FormData){a.action=h.url;a.submit();h.onfileUpCallback()}console.log(f);f.send(data)}}else{a.action=h.url;a.submit();h.onfileUpCallback()}},stop:function(a){if(this[a].xhr&&!isDomObject(this[a].xhr)){this[a].stopFlag=true;this[a].xhr.abort()}}};function encodeData(c,b,d,g){var h="",f,e,a;switch(b){case"form":if(isDomObject(c,"form")){if(window.FormData){h=new FormData(c)}else{serialize(c,g,d)}}else{h=c}break;case"text":if(typeof c=="object"){for(f in c){if(h!==""){h+="&"+f+"="+encodeURIComponent(c[f])}else{h+=f+"="+encodeURIComponent(c[f])}}}else{h=c}break;case"json":if(isJson(c)&&typeof JSON.stringify=="function"){h=JSON.stringify(c)}break;case"file":if(window.FormData){if(c.files){var h=new FormData();h.append(d,c.files)}}else{g.fileUp=true;createFormForFile(g.data,g,d);h=c}break;default:h=c}return h}function isDomObject(a,b){if(a==null||undefined){return false}if(typeof a=="object"&&a.nodeType===1){if(!b||b=="all"||a.nodeName.toLowerCase()==b.toLowerCase()){return true}else{return false}}else{return false}}function isJson(b){var a=typeof b=="object"&&Object.prototype.toString.call(b).toLowerCase()=="[object object]"&&!b.length;return a}function serialize(a,f){var b=[],k=null,d,g,c,h,e,l;for(d=0,g=a.elements.length;d<g;d++){k=a.elements[d];switch(k.type){case"select-one":case"select-multiple":if(k.name.length){for(c=0,h=k.options.length;c<h;c++){e=k.options[c];if(e.selected){l=(e.hasAttribute("value")?e.value:e.text)}else{l=(e.attributes["value"].specified?e.value:e.text)}b.push(encodeURIComponent(k.name)+"="+encodeURIComponent(l))}}break;case undefined:case"file":if(!isDomObject(f.fileForm,"form")){createFormForFile(k,f,name)}break;case"sumbit":case"reset":case"button":break;case"radio":case"checkbox":if(!k.checked){break}default:if(k.name.length){b.push(encodeURIComponent(k.name)+"="+encodeURIComponent(k.value))}}}return b.join("&")}function createFormForFile(b,d,a){var c=document.createElement("form"),e=document.createElement("iframe"),f=b.cloneNode(true);document.body.appendChild(c);e.name=a;c.method="post";c.enctype="multipart/form-data";c.target=a;c.style.cssText="display:inline-block";e.style.cssText="display:none";c.appendChild(f);c.appendChild(e);b.parentNode.replaceChild(c,b);d.fileForm=c};